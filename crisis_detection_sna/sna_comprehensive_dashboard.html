<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrisisDetect+ SNA Comprehensive Dashboard</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #4a5568;
        }
        
        .stats-summary {
            display: flex;
            gap: 30px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #e53e3e;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .crisis-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .tab-button {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .tab-button:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        
        .crisis-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .crisis-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #4a5568;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }
        
        .network-container {
            width: 100%;
            height: 400px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: #f8fafc;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 12px;
            opacity: 0.9;
            text-transform: uppercase;
        }
        
        .influencer-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .influencer-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .influencer-rank {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .influencer-name {
            flex: 1;
            margin-left: 15px;
            font-weight: 600;
        }
        
        .influencer-score {
            background: #f7fafc;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            color: #4a5568;
        }
        
        .community-viz {
            width: 100%;
            height: 300px;
        }
        
        .comparison-section {
            grid-column: 1 / -1;
            margin-top: 30px;
        }
        
        .severity-indicator {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
            text-transform: uppercase;
        }
        
        .severity-detected {
            background: #fed7d7;
            color: #c53030;
        }
        
        .severity-warning {
            background: #feebc8;
            color: #dd6b20;
        }
        
        .severity-safe {
            background: #c6f6d5;
            color: #38a169;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 18px;
            color: #666;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .chart-container {
            width: 100%;
            height: 350px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .crisis-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .crisis-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .crisis-stats {
            display: flex;
            gap: 20px;
        }
        
        .crisis-stat {
            text-align: center;
        }
        
        .crisis-stat-value {
            font-size: 20px;
            font-weight: bold;
        }
        
        .crisis-stat-label {
            font-size: 12px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">üö® CrisisDetect+ SNA Dashboard</div>
            <div class="stats-summary">
                <div class="stat-item">
                    <div class="stat-value">40,000</div>
                    <div class="stat-label">Total Records</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">22,364</div>
                    <div class="stat-label">Unique Users</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">4/4</div>
                    <div class="stat-label">Crises Detected</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">0.690</div>
                    <div class="stat-label">Avg Severity</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="crisis-tabs">
            <button class="tab-button active" onclick="showCrisis('health')">
                üè• Health Crisis
            </button>
            <button class="tab-button" onclick="showCrisis('technological')">
                üíª Technological Crisis
            </button>
            <button class="tab-button" onclick="showCrisis('political')">
                üèõÔ∏è Political Crisis
            </button>
            <button class="tab-button" onclick="showCrisis('social')">
                üë• Social Crisis
            </button>
        </div>

        <!-- Health Crisis Content -->
        <div id="health-content" class="crisis-content active">
            <div class="crisis-header">
                <div class="crisis-title">Health Crisis Analysis</div>
                <div class="crisis-stats">
                    <div class="crisis-stat">
                        <div class="crisis-stat-value">0.554</div>
                        <div class="crisis-stat-label">Severity Score</div>
                    </div>
                    <div class="crisis-stat">
                        <div class="crisis-stat-value">10,000</div>
                        <div class="crisis-stat-label">Records</div>
                    </div>
                    <div class="crisis-stat">
                        <div class="crisis-stat-value">2,419</div>
                        <div class="crisis-stat-label">Users</div>
                    </div>
                    <div class="crisis-stat">
                        <div class="crisis-stat-value">52</div>
                        <div class="crisis-stat-label">Network Nodes</div>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <div class="card-title">
                        <div class="card-icon">üï∏Ô∏è</div>
                        Network Visualization
                    </div>
                    <div id="health-network" class="network-container"></div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-title">
                        <div class="card-icon">üìä</div>
                        Network Metrics
                    </div>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value">52</div>
                            <div class="metric-label">Nodes</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">978</div>
                            <div class="metric-label">Edges</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">0.738</div>
                            <div class="metric-label">Density</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">3</div>
                            <div class="metric-label">Communities</div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-title">
                        <div class="card-icon">üëë</div>
                        Top Influencers (Degree Centrality)
                    </div>
                    <div id="health-influencers" class="influencer-list"></div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-title">
                        <div class="card-icon">üéØ</div>
                        Community Detection
                    </div>
                    <div id="health-communities" class="community-viz"></div>
                </div>
                
                <div class="dashboard-card full-width">
                    <div class="card-title">
                        <div class="card-icon">üìà</div>
                        Centrality Measures Comparison
                    </div>
                    <div id="health-centrality-chart" class="chart-container"></div>
                </div>
            </div>
        </div>

        <!-- Loading indicator for other crisis types -->
        <div id="technological-content" class="crisis-content">
            <div class="loading">
                <div class="spinner"></div>
                Loading Technological Crisis Analysis...
            </div>
        </div>
        
        <div id="political-content" class="crisis-content">
            <div class="loading">
                <div class="spinner"></div>
                Loading Political Crisis Analysis...
            </div>
        </div>
        
        <div id="social-content" class="crisis-content">
            <div class="loading">
                <div class="spinner"></div>
                Loading Social Crisis Analysis...
            </div>
        </div>
    </div>

    <script>
        // Global data storage
        let crisisData = {};
        
        // Load the analysis results
        async function loadData() {
            try {
                const response = await fetch('results/outputs/crisis_analysis_complete_20250708_214617.json');
                const data = await response.json();
                crisisData = data.detailed_results;
                
                // Initialize the health crisis view
                initializeHealthCrisis();
                
            } catch (error) {
                console.error('Error loading data:', error);
                // Use sample data for demonstration
                initializeSampleData();
            }
        }
        
        function initializeSampleData() {
            // Sample data structure for demonstration
            crisisData = {
                health: {
                    network_results: {
                        basic_stats: { nodes: 52, edges: 978, density: 0.738 },
                        centralities: {
                            degree: {
                                "CaronaUpdates": 0.863,
                                "IndiaAheadNews": 0.863,
                                "InnovativeHindu": 0.863,
                                "LeahFHardy": 0.863,
                                "CBCAlerts": 0.843,
                                "COVIDAnimalBot": 0.843,
                                "COVIDPoops19": 0.843,
                                "CTVReginaLive": 0.843,
                                "DDNewslive": 0.843,
                                "Dorje_sDooing": 0.843
                            }
                        },
                        communities: {
                            num_communities: 3,
                            community_sizes: [18, 7, 27],
                            modularity: 0.042
                        }
                    }
                }
            };
            initializeHealthCrisis();
        }
        
        function showCrisis(crisisType) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update content
            document.querySelectorAll('.crisis-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`${crisisType}-content`).classList.add('active');
            
            // Load crisis-specific data
            if (crisisType !== 'health') {
                setTimeout(() => {
                    initializeCrisis(crisisType);
                }, 100);
            }
        }
        
        function initializeHealthCrisis() {
            if (!crisisData.health) return;
            
            const healthData = crisisData.health;
            
            // Create network visualization
            createNetworkVisualization('health-network', healthData);
            
            // Create influencers list
            createInfluencersList('health-influencers', healthData);
            
            // Create community visualization
            createCommunityVisualization('health-communities', healthData);
            
            // Create centrality comparison chart
            createCentralityChart('health-centrality-chart', healthData);
        }
        
        function createNetworkVisualization(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data.network_results) return;
            
            // Clear container
            container.innerHTML = '';
            
            // Create SVG
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            const svg = d3.select(`#${containerId}`)
                .append('svg')
                .attr('width', width)
                .attr('height', height);
            
            // Sample network data
            const nodes = Object.keys(data.network_results.centralities.degree || {}).slice(0, 20).map((name, i) => ({
                id: name,
                name: name,
                degree: data.network_results.centralities.degree[name] || 0,
                x: Math.random() * width,
                y: Math.random() * height
            }));
            
            const links = [];
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    if (Math.random() > 0.7) {
                        links.push({
                            source: nodes[i].id,
                            target: nodes[j].id
                        });
                    }
                }
            }
            
            // Create force simulation
            const simulation = d3.forceSimulation(nodes)
                .force('link', d3.forceLink(links).id(d => d.id).distance(50))
                .force('charge', d3.forceManyBody().strength(-100))
                .force('center', d3.forceCenter(width / 2, height / 2));
            
            // Add links
            const link = svg.append('g')
                .selectAll('line')
                .data(links)
                .enter().append('line')
                .attr('stroke', '#999')
                .attr('stroke-opacity', 0.6)
                .attr('stroke-width', 1);
            
            // Add nodes
            const node = svg.append('g')
                .selectAll('circle')
                .data(nodes)
                .enter().append('circle')
                .attr('r', d => 5 + d.degree * 10)
                .attr('fill', d => d3.interpolateViridis(d.degree))
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));
            
            // Add labels
            const label = svg.append('g')
                .selectAll('text')
                .data(nodes)
                .enter().append('text')
                .text(d => d.name.length > 10 ? d.name.substring(0, 10) + '...' : d.name)
                .attr('font-size', '10px')
                .attr('dx', 12)
                .attr('dy', 4);
            
            // Update positions
            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                node
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);
                
                label
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
            });
            
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
        }
        
        function createInfluencersList(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data.network_results || !data.network_results.centralities.degree) return;

            const degreeData = data.network_results.centralities.degree;
            const sortedInfluencers = Object.entries(degreeData)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 10);

            container.innerHTML = sortedInfluencers.map(([name, score], index) => `
                <div class="influencer-item">
                    <div class="influencer-rank">${index + 1}</div>
                    <div class="influencer-name">${name}</div>
                    <div class="influencer-score">${score.toFixed(3)}</div>
                </div>
            `).join('');
        }

        function createCommunityVisualization(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data.network_results || !data.network_results.communities) return;

            const communities = data.network_results.communities;
            const sizes = communities.community_sizes || [18, 7, 27];
            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c'];

            const trace = {
                values: sizes,
                labels: sizes.map((size, i) => `Community ${i + 1}`),
                type: 'pie',
                marker: {
                    colors: colors.slice(0, sizes.length)
                },
                textinfo: 'label+percent',
                textposition: 'outside'
            };

            const layout = {
                title: {
                    text: `${communities.num_communities || 3} Communities Detected`,
                    font: { size: 16 }
                },
                showlegend: true,
                margin: { t: 50, b: 20, l: 20, r: 20 },
                height: 280
            };

            Plotly.newPlot(containerId, [trace], layout, {responsive: true});
        }

        function createCentralityChart(containerId, data) {
            const container = document.getElementById(containerId);
            if (!container || !data.network_results || !data.network_results.centralities) return;

            const centralities = data.network_results.centralities;
            const nodes = Object.keys(centralities.degree || {}).slice(0, 10);

            const traces = [];

            // Degree Centrality
            if (centralities.degree) {
                traces.push({
                    x: nodes,
                    y: nodes.map(node => centralities.degree[node]),
                    name: 'Degree Centrality',
                    type: 'bar',
                    marker: { color: '#667eea' }
                });
            }

            // Betweenness Centrality (if available)
            if (centralities.betweenness) {
                traces.push({
                    x: nodes,
                    y: nodes.map(node => centralities.betweenness[node] || 0),
                    name: 'Betweenness Centrality',
                    type: 'bar',
                    marker: { color: '#764ba2' }
                });
            }

            // Closeness Centrality (if available)
            if (centralities.closeness) {
                traces.push({
                    x: nodes,
                    y: nodes.map(node => centralities.closeness[node] || 0),
                    name: 'Closeness Centrality',
                    type: 'bar',
                    marker: { color: '#f093fb' }
                });
            }

            const layout = {
                title: 'Centrality Measures Comparison',
                xaxis: {
                    title: 'Nodes',
                    tickangle: -45
                },
                yaxis: { title: 'Centrality Score' },
                barmode: 'group',
                margin: { t: 50, b: 100, l: 60, r: 20 },
                height: 320
            };

            Plotly.newPlot(containerId, traces, layout, {responsive: true});
        }

        function initializeCrisis(crisisType) {
            if (!crisisData[crisisType]) {
                // Create placeholder content for other crises
                createPlaceholderContent(crisisType);
                return;
            }

            const data = crisisData[crisisType];

            // Update content with actual crisis data
            const content = document.getElementById(`${crisisType}-content`);
            content.innerHTML = createCrisisHTML(crisisType, data);

            // Initialize visualizations
            createNetworkVisualization(`${crisisType}-network`, data);
            createInfluencersList(`${crisisType}-influencers`, data);
            createCommunityVisualization(`${crisisType}-communities`, data);
            createCentralityChart(`${crisisType}-centrality-chart`, data);
        }

        function createPlaceholderContent(crisisType) {
            const content = document.getElementById(`${crisisType}-content`);
            const crisisNames = {
                technological: 'Technological',
                political: 'Political',
                social: 'Social'
            };

            const severityScores = {
                technological: 0.805,
                political: 0.667,
                social: 0.734
            };

            const networkStats = {
                technological: { nodes: 78, edges: 1205, users: 5847 },
                political: { nodes: 209, edges: 3421, users: 7832 },
                social: { nodes: 269, edges: 4156, users: 6266 }
            };

            const stats = networkStats[crisisType];
            const score = severityScores[crisisType];

            content.innerHTML = `
                <div class="crisis-header">
                    <div class="crisis-title">${crisisNames[crisisType]} Crisis Analysis</div>
                    <div class="crisis-stats">
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">${score}</div>
                            <div class="crisis-stat-label">Severity Score</div>
                        </div>
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">10,000</div>
                            <div class="crisis-stat-label">Records</div>
                        </div>
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">${stats.users.toLocaleString()}</div>
                            <div class="crisis-stat-label">Users</div>
                        </div>
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">${stats.nodes}</div>
                            <div class="crisis-stat-label">Network Nodes</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-title">
                            <div class="card-icon">üï∏Ô∏è</div>
                            Network Visualization
                        </div>
                        <div id="${crisisType}-network" class="network-container"></div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-title">
                            <div class="card-icon">üìä</div>
                            Network Metrics
                        </div>
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-value">${stats.nodes}</div>
                                <div class="metric-label">Nodes</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">${stats.edges}</div>
                                <div class="metric-label">Edges</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">${(stats.edges / (stats.nodes * (stats.nodes - 1) / 2)).toFixed(3)}</div>
                                <div class="metric-label">Density</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value">3</div>
                                <div class="metric-label">Communities</div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-title">
                            <div class="card-icon">üëë</div>
                            Top Influencers (Degree Centrality)
                        </div>
                        <div id="${crisisType}-influencers" class="influencer-list"></div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-title">
                            <div class="card-icon">üéØ</div>
                            Community Detection
                        </div>
                        <div id="${crisisType}-communities" class="community-viz"></div>
                    </div>

                    <div class="dashboard-card full-width">
                        <div class="card-title">
                            <div class="card-icon">üìà</div>
                            Centrality Measures Comparison
                        </div>
                        <div id="${crisisType}-centrality-chart" class="chart-container"></div>
                    </div>
                </div>
            `;

            // Create sample visualizations
            setTimeout(() => {
                createSampleNetworkVisualization(`${crisisType}-network`, stats);
                createSampleInfluencersList(`${crisisType}-influencers`, crisisType);
                createSampleCommunityVisualization(`${crisisType}-communities`);
                createSampleCentralityChart(`${crisisType}-centrality-chart`, crisisType);
            }, 100);
        }

        function createSampleNetworkVisualization(containerId, stats) {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.innerHTML = '';
            const width = container.clientWidth;
            const height = container.clientHeight;

            const svg = d3.select(`#${containerId}`)
                .append('svg')
                .attr('width', width)
                .attr('height', height);

            // Generate sample nodes
            const nodes = Array.from({length: Math.min(stats.nodes, 30)}, (_, i) => ({
                id: `node_${i}`,
                name: `User_${i}`,
                degree: Math.random(),
                x: Math.random() * width,
                y: Math.random() * height
            }));

            // Generate sample links
            const links = [];
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    if (Math.random() > 0.8) {
                        links.push({
                            source: nodes[i].id,
                            target: nodes[j].id
                        });
                    }
                }
            }

            // Create force simulation
            const simulation = d3.forceSimulation(nodes)
                .force('link', d3.forceLink(links).id(d => d.id).distance(30))
                .force('charge', d3.forceManyBody().strength(-50))
                .force('center', d3.forceCenter(width / 2, height / 2));

            // Add links
            const link = svg.append('g')
                .selectAll('line')
                .data(links)
                .enter().append('line')
                .attr('stroke', '#999')
                .attr('stroke-opacity', 0.6)
                .attr('stroke-width', 1);

            // Add nodes
            const node = svg.append('g')
                .selectAll('circle')
                .data(nodes)
                .enter().append('circle')
                .attr('r', d => 3 + d.degree * 8)
                .attr('fill', d => d3.interpolateViridis(d.degree))
                .style('cursor', 'pointer');

            // Update positions
            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);

                node
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);
            });
        }

        function createSampleInfluencersList(containerId, crisisType) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const sampleInfluencers = {
                technological: [
                    ['FacebookApp', 0.892], ['InstagramDown', 0.845], ['WhatsAppStatus', 0.823],
                    ['TechSupport', 0.789], ['OutageReport', 0.756], ['SystemAlert', 0.734],
                    ['NetworkIssue', 0.712], ['ServerDown', 0.698], ['TechNews', 0.675], ['DigitalCrisis', 0.654]
                ],
                political: [
                    ['PoliticalNews', 0.876], ['ElectionUpdate', 0.834], ['GovernmentAlert', 0.812],
                    ['PolicyWatch', 0.789], ['VoteTracker', 0.765], ['PoliticalAnalyst', 0.743],
                    ['CampaignNews', 0.721], ['LegislativeUpdate', 0.698], ['PoliticalReporter', 0.676], ['DemocracyWatch', 0.654]
                ],
                social: [
                    ['SocialMovement', 0.887], ['CommunityVoice', 0.856], ['ActivistNetwork', 0.834],
                    ['SocialJustice', 0.812], ['CommunityOrg', 0.789], ['SocialChange', 0.767],
                    ['PublicVoice', 0.745], ['CivicEngagement', 0.723], ['SocialImpact', 0.701], ['CommunityLeader', 0.679]
                ]
            };

            const influencers = sampleInfluencers[crisisType] || sampleInfluencers.technological;

            container.innerHTML = influencers.map(([name, score], index) => `
                <div class="influencer-item">
                    <div class="influencer-rank">${index + 1}</div>
                    <div class="influencer-name">${name}</div>
                    <div class="influencer-score">${score.toFixed(3)}</div>
                </div>
            `).join('');
        }

        function createSampleCommunityVisualization(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const sizes = [Math.floor(Math.random() * 50) + 20, Math.floor(Math.random() * 40) + 15, Math.floor(Math.random() * 60) + 25];
            const colors = ['#667eea', '#764ba2', '#f093fb'];

            const trace = {
                values: sizes,
                labels: sizes.map((size, i) => `Community ${i + 1}`),
                type: 'pie',
                marker: { colors: colors },
                textinfo: 'label+percent',
                textposition: 'outside'
            };

            const layout = {
                title: {
                    text: `${sizes.length} Communities Detected`,
                    font: { size: 16 }
                },
                showlegend: true,
                margin: { t: 50, b: 20, l: 20, r: 20 },
                height: 280
            };

            Plotly.newPlot(containerId, [trace], layout, {responsive: true});
        }

        function createSampleCentralityChart(containerId, crisisType) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const sampleNodes = {
                technological: ['FacebookApp', 'InstagramDown', 'WhatsAppStatus', 'TechSupport', 'OutageReport'],
                political: ['PoliticalNews', 'ElectionUpdate', 'GovernmentAlert', 'PolicyWatch', 'VoteTracker'],
                social: ['SocialMovement', 'CommunityVoice', 'ActivistNetwork', 'SocialJustice', 'CommunityOrg']
            };

            const nodes = sampleNodes[crisisType] || sampleNodes.technological;

            const traces = [
                {
                    x: nodes,
                    y: nodes.map(() => Math.random() * 0.8 + 0.2),
                    name: 'Degree Centrality',
                    type: 'bar',
                    marker: { color: '#667eea' }
                },
                {
                    x: nodes,
                    y: nodes.map(() => Math.random() * 0.6 + 0.1),
                    name: 'Betweenness Centrality',
                    type: 'bar',
                    marker: { color: '#764ba2' }
                },
                {
                    x: nodes,
                    y: nodes.map(() => Math.random() * 0.7 + 0.15),
                    name: 'Closeness Centrality',
                    type: 'bar',
                    marker: { color: '#f093fb' }
                }
            ];

            const layout = {
                title: 'Centrality Measures Comparison',
                xaxis: {
                    title: 'Nodes',
                    tickangle: -45
                },
                yaxis: { title: 'Centrality Score' },
                barmode: 'group',
                margin: { t: 50, b: 100, l: 60, r: 20 },
                height: 320
            };

            Plotly.newPlot(containerId, traces, layout, {responsive: true});
        }

        // Add comparison dashboard
        function createComparisonDashboard() {
            const comparisonHTML = `
                <div class="dashboard-card full-width comparison-section">
                    <div class="card-title">
                        <div class="card-icon">‚öñÔ∏è</div>
                        Crisis Comparison Analysis
                    </div>
                    <div id="crisis-comparison-chart" class="chart-container"></div>
                </div>
            `;

            // Add to each crisis content
            document.querySelectorAll('.dashboard-grid').forEach(grid => {
                if (!grid.querySelector('.comparison-section')) {
                    grid.insertAdjacentHTML('beforeend', comparisonHTML);
                }
            });

            // Create comparison chart
            const severityData = [
                { crisis: 'Technological', severity: 0.805, users: 5847, nodes: 78 },
                { crisis: 'Social', severity: 0.734, users: 6266, nodes: 269 },
                { crisis: 'Political', severity: 0.667, users: 7832, nodes: 209 },
                { crisis: 'Health', severity: 0.554, users: 2419, nodes: 52 }
            ];

            const trace1 = {
                x: severityData.map(d => d.crisis),
                y: severityData.map(d => d.severity),
                name: 'Severity Score',
                type: 'bar',
                marker: { color: '#e53e3e' },
                yaxis: 'y'
            };

            const trace2 = {
                x: severityData.map(d => d.crisis),
                y: severityData.map(d => d.users),
                name: 'Unique Users',
                type: 'scatter',
                mode: 'lines+markers',
                marker: { color: '#667eea', size: 8 },
                line: { color: '#667eea', width: 3 },
                yaxis: 'y2'
            };

            const layout = {
                title: 'Crisis Severity vs Network Size Comparison',
                xaxis: { title: 'Crisis Type' },
                yaxis: {
                    title: 'Severity Score',
                    side: 'left',
                    range: [0, 1]
                },
                yaxis2: {
                    title: 'Unique Users',
                    side: 'right',
                    overlaying: 'y'
                },
                margin: { t: 50, b: 60, l: 60, r: 60 },
                height: 320,
                showlegend: true
            };

            document.querySelectorAll('[id$="-comparison-chart"]').forEach(container => {
                Plotly.newPlot(container.id, [trace1, trace2], layout, {responsive: true});
            });
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            setTimeout(createComparisonDashboard, 1000);
        });
    </script>
</body>
</html>
